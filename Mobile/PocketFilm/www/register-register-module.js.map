{"version":3,"sources":["webpack:///./src/app/register/register.module.ts","webpack:///./src/app/register/register.page.html","webpack:///./src/app/register/register.page.scss","webpack:///./src/app/register/register.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEE;AAE/C,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAY;KACxB;CACF,CAAC;AAWF;IAAA;IAAiC,CAAC;IAArB,kBAAkB;QAT9B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,2DAAY,CAAC;SAC7B,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;ACzB/B,mOAAmO,8kBAA8kB,gBAAgB,8IAA8I,gBAAgB,yUAAyU,YAAY,8F;;;;;;;;;;;ACApzC,+DAA+D,2I;;;;;;;;;;;;;;;;;;;;;ACAb;AACT;AAEW;AACJ;AACa;AAO7D;IAYE,sBACS,OAAuB,EACvB,KAAmB,EACnB,WAA+B,EAC/B,MAAc;QAHd,YAAO,GAAP,OAAO,CAAgB;QACvB,UAAK,GAAL,KAAK,CAAc;QACnB,gBAAW,GAAX,WAAW,CAAoB;QAC/B,WAAM,GAAN,MAAM,CAAQ;QAdhB,aAAQ,GAAG;YAChB,QAAQ,EAAE,EAAE;YACZ,MAAM,EAAE,EAAE;SACX;QACM,SAAI,GAAG,EAAE,CAAC;QAGV,SAAI,GAAG,IAAI,CAAC;QACZ,mBAAc,GAAG,OAAO,CAAC;IAO5B,CAAC;IAEL,+BAAQ,GAAR;IACA,CAAC;IAED;;OAEG;IAEH,uCAAgB,GAAhB;QAAA,iBAUC;QATC,IAAI,GAAG,GAAG,kCAAkC,CAAC;QAC7C,IAAI,OAAO,CAAC;QACZ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,EAAE,UAAC,IAAI;YAC/C,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,EAAE;gBAClB,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;gBACvB,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;gBACtC,KAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,EAAE,CAAC;aAC7B;QACH,CAAC,CAAC;IACJ,CAAC;IAED;;OAEG;IAEH,qCAAc,GAAd;QAAA,iBAUC;QATC,IAAI,GAAG,GAAG,gCAAgC,CAAC;QAC3C,IAAI,OAAO,CAAC;QACZ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,EAAE,UAAC,IAAI;YAC/C,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,EAAE;gBAClB,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;gBACvB,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;gBACtC,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC;aAC3B;QACH,CAAC,CAAC;IACJ,CAAC;IAED;;OAEG;IAEH,sCAAe,GAAf;QAAA,iBA0BC;QAzBC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,EAAE,EAAE;YAC9B,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5C;aAAM;YACL,IAAI,CAAC,KAAK,CAAC,sBAAsB,EAAE,CAAC,IAAI,CAAC,UAAC,IAAS;gBACjD,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,EAAE;oBAClB,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC;oBAC5B,KAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;oBACpE,CAAC,CAAC;oBACF,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;oBACnE,CAAC,CAAC;oBACF,IAAI,IAAI,GAAG,EAAE,CAAC;oBACd,WAAW,CAAC;wBACV,IAAI,IAAI,GAAG,CAAC,EAAE;4BACZ,KAAI,CAAC,IAAI,GAAG,KAAK,CAAC;4BAClB,KAAI,CAAC,cAAc,GAAG,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC;4BAC5C,IAAI,EAAE,CAAC;yBACR;6BAAM;4BACL,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;4BACjB,KAAI,CAAC,cAAc,GAAG,OAAO,CAAC;yBAC/B;oBACH,CAAC,EAAC,IAAI,CAAC;iBACR;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,+BAAQ,GAAR;QAAA,iBA6BC;QA5BC,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,EAAE,EAAE;YAChC,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC/C;aAAM;YACL,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,EAAE,EAAE;gBAC9B,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;gBACzB,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC/C;iBAAM;gBACL,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,EAAE;oBACnB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;oBACzB,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC/C;qBAAM;oBACL,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,IAAS;wBAChF,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,EAAE;4BAClB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iBAAiB,CAAC,EAAE;gCACxC,WAAW,EAAE;oCACX,QAAQ,EAAE,KAAI,CAAC,QAAQ,CAAC,QAAQ;oCAClC,MAAM,EAAE,KAAI,CAAC,QAAQ,CAAC,MAAM;iCAC3B;6BACF,CAAC;yBACH;6BAAM;4BACL,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;4BAC5B,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;yBAC5C;oBACH,CAAC,CAAC;iBACH;aACF;SACF;IACH,CAAC;IAnHU,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,cAAc;YACxB,kGAAmC;;SAEpC,CAAC;+EAckB,+DAAc;YAChB,2DAAY;YACN,wEAAkB;YACvB,sDAAM;OAhBZ,YAAY,CAqHxB;IAAD,mBAAC;CAAA;AArHwB","file":"register-register-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"danger\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n          </ion-buttons>\\n        <ion-title style=\\\"text-align: center;\\\">注册</ion-title>\\n      </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n\\n    <div>\\n        <ion-list>\\n            <ion-item>\\n              <ion-input type=\\\"text\\\" placeholder=\\\"请输入用户名\\\" [(ngModel)]=\\\"userInfo.username\\\" (ionBlur)=\\\"validateUsername()\\\"></ion-input>\\n            </ion-item>\\n            <ion-item>\\n                  <ion-input type=\\\"text\\\" placeholder=\\\"请输入手机号\\\" [(ngModel)]=\\\"userInfo.mobile\\\" (ionBlur)=\\\"validateMobile()\\\"></ion-input>\\n                  <ion-button ion-button color=\\\"success\\\" item-right *ngIf=\\\"send\\\" (click)=\\\"sendMessageCode()\\\">{{sendCodeButton}}</ion-button>\\n                  <ion-button ion-button color=\\\"success\\\" disabled item-right *ngIf=\\\"!send\\\" (click)=\\\"sendMessageCode()\\\">{{sendCodeButton}}</ion-button>\\n              </ion-item>\\n              <ion-item>\\n                  <ion-input type=\\\"text\\\" placeholder=\\\"请输入短信验证码\\\" [(ngModel)]=\\\"code\\\"></ion-input>\\n                </ion-item>\\n          </ion-list>\\n          <div padding>\\n            <ion-button ion-button color=\\\"danger\\\" style=\\\"border-radius: .5rem;width: 100%;\\\" (click)=\\\"register()\\\">立即注册</ion-button>\\n          </div>\\n    </div>\\n\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { StorageService } from '../storage.service';\nimport { ToolsService } from '../tools.service';\nimport { HttpServiceService } from '../http-service.service';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n\n  public userInfo = {\n    username: '',\n    mobile: ''\n  }\n  public code = '';\n  public message;\n  public api;\n  public send = true;\n  public sendCodeButton = '获取验证码';\n\n  constructor(\n    public storage: StorageService,\n    public tools: ToolsService,\n    public httpService: HttpServiceService,\n    public router: Router\n  ) { }\n\n  ngOnInit() {\n  }\n\n  /**\n   * 验证用户名\n   */\n\n  validateUsername() {\n    var api = '/user/register/validate_username';\n    var message;\n    this.httpService.doPost(api, this.userInfo, (data) => {\n      if (data.code != 0) {\n        message = data.message;\n        this.tools.alertWithOkButton(message);\n        this.userInfo.username = '';\n      }\n    })\n  }\n\n  /**\n   * 验证手机号\n   */\n\n  validateMobile() {\n    var api = '/user/register/validate_mobile';\n    var message;\n    this.httpService.doPost(api, this.userInfo, (data) => {\n      if (data.code != 0) {\n        message = data.message;\n        this.tools.alertWithOkButton(message);\n        this.userInfo.mobile = '';\n      }\n    })\n  }\n\n  /**\n   * 发送短信验证码\n   */\n\n  sendMessageCode() {\n    if (this.userInfo.mobile == '') {\n      this.message = '手机号不能为空';\n      this.tools.alertWithOkButton(this.message);\n    } else {\n      this.tools.generateMessageCodeApi().then((data: any) => {\n        if (data.code == 0) {\n          var code = data.messageCode;\n          this.tools.sendMessageCodeApi(this.userInfo.mobile, code).then((data) => {\n          })\n          this.tools.addMessageCodeApi(this.userInfo.mobile, code).then((data) => {\n          })\n          var time = 59;\n          setInterval(() => {\n            if (time > 0) {\n              this.send = false;\n              this.sendCodeButton = '重新获取(' + time + 's)';\n              time--;\n            } else {\n              this.send = true;\n              this.sendCodeButton = '获取验证码';\n            }\n          },1000)\n        }\n      })\n    }\n  }\n\n  register() {\n    if (this.userInfo.username == '') {\n      this.message = '用户名不能为空';\n      this.tools.toastWithoutCallback(this.message);\n    } else {\n      if (this.userInfo.mobile == '') {\n        this.message = '手机号不能为空';\n        this.tools.toastWithoutCallback(this.message);\n      } else {\n        if (this.code == '') {\n          this.message = '验证码不能为空';\n          this.tools.toastWithoutCallback(this.message);\n        } else {\n          this.tools.validateMessageCodeApi(this.userInfo.mobile, this.code).then((data: any) => {\n            if (data.code == 0) {\n              this.router.navigate(['/input-password'], {\n                queryParams: {\n                  username: this.userInfo.username,\n                mobile: this.userInfo.mobile\n                }\n              })\n            } else {\n              this.message = data.message;\n              this.tools.alertWithOkButton(this.message);\n            }\n          })\n        }\n      }\n    }\n  }\n\n}\n"],"sourceRoot":""}