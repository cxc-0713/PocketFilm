{"version":3,"sources":["webpack:///./src/app/more-tv/more-tv.module.ts","webpack:///./src/app/more-tv/more-tv.page.html","webpack:///./src/app/more-tv/more-tv.page.scss","webpack:///./src/app/more-tv/more-tv.page.ts"],"names":[],"mappings":"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","file":"more-tv-more-tv-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MoreTvPage } from './more-tv.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MoreTvPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MoreTvPage]\n})\nexport class MoreTvPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"danger\\\">\\n    <ion-back-button defaultHref=\\\"/\\\" slot=\\\"start\\\"></ion-back-button>\\n    <ion-title>{{type}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <!-- 下拉刷新 -->\\n  <ion-refresher (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"松开刷新\\\" refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"正在刷新\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n  <!-- 下拉刷新 -->\\n\\n  <!-- 更多电视 -->\\n  <section class=\\\"main\\\">\\n    <div id=\\\"page\\\">\\n    </div>\\n\\n    <!-- 分类 -->\\n    <div class=\\\"type_list_more\\\">\\n      <ion-segment scrollable>\\n        <ion-segment-button value=\\\"{{type}}\\\" (click)=\\\"changeTvType(type)\\\" *ngFor=\\\"let type of typeList;let i = index\\\">\\n          <a class=\\\"more_movie_type_name more_movie_type_name_selected\\\" (click)=\\\"changeTvType(type)\\\"\\n            *ngIf=\\\"selectedType == type\\\">{{type}}</a>\\n          <a class=\\\"more_movie_type_name\\\" (click)=\\\"changeMovieType(type)\\\" *ngIf=\\\"selectedType != type\\\">{{type}}</a>\\n        </ion-segment-button>\\n      </ion-segment>\\n    </div>\\n\\n    <!-- 电视列表 -->\\n    <div class=\\\"mod_a globalPadding\\\">\\n      <div class=\\\"tb_a\\\">\\n        <ul class=\\\"picTxt picTxtA clearfix\\\" id=\\\"data_list\\\">\\n          <li *ngFor=\\\"let latestTop10Movie of tvList\\\" (click)=\\\"goTvDetail((latestTop10Movie._id))\\\">\\n            <div class=\\\"con\\\">\\n              <a title=\\\"{{latestTop10Movie.name}}\\\"><img\\n                  data-src=\\\"{{latestTop10Movie.src}}\\\" alt=\\\"{{latestTop10Movie.name}}\\\" src=\\\"{{latestTop10Movie.src}}\\\"\\n                  onerror=\\\"onerror=null;src='http://149.129.94.197:8085/assets/img/load.gif'\\\"\\n                  style=\\\"width: 158rem; height: 13rem; display: block;\\\"><span\\n                  class=\\\"sTit\\\">{{latestTop10Movie.name}}</span> </a>\\n            </div>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </section>\\n\\n  <!-- 上拉加载更多 -->\\n  <ion-infinite-scroll (ionInfinite)=\\\"doLoadMore($event)\\\">\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"正在加载\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <!-- 上拉加载更多 -->\\n\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vcmUtdHYvbW9yZS10di5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\n\nimport { StorageService } from '../storage.service';\nimport { ToolsService } from '../tools.service';\n\n@Component({\n  selector: 'app-more-tv',\n  templateUrl: './more-tv.page.html',\n  styleUrls: ['./more-tv.page.scss'],\n})\nexport class MoreTvPage implements OnInit {\n\n  // 电视类型名称\n  public type;\n  // 当前选中的电视类型\n  public selectedType = '全部'\n  // 需要加上二级分类的电视类型\n  public specialTypeList = ['地方台', '港澳台', '海外台']\n  // 电视类型二级分类列表\n  public typeList = []\n  // 地方台名称列表\n  public localStationNameList = [\n    '全部',\n    '广东台',\n    '福建台',\n    '天津台',\n    '湖南台',\n    '辽宁台',\n    '河南台',\n    '江西台',\n    '内蒙古台',\n    '新疆台',\n    '上海台',\n    '安徽台',\n    '浙江台',\n    '贵州台',\n    '湖北台',\n    '山西台',\n    '山东台',\n    '广西台',\n    '北京台',\n    '陕西台',\n    '四川台',\n    '吉林台',\n    '重庆台',\n    '河北台',\n    '甘肃台',\n    '江苏台',\n    '海南台',\n    '黑龙江台',\n    '云南台',\n    '宁夏台',\n    '青海台'\n  ]\n  // 港澳台名称列表\n  public hongkongMacaoTaiwanNameList = [\n    '全部',\n    '香港台',\n    '澳门台',\n    '台湾台'\n  ]\n  // 海外台名称列表\n  public overseasStationNameList = [\n    '全部',\n    '韩国台',\n    '英国台',\n    '海外台',\n    '美国台',\n    '新加坡台',\n    '印度台',\n    '马来西亚台',\n    '加拿大台',\n    '法国台'\n  ]\n\n  // 电视列表\n  public tvList = []\n  public tvListTemp = []\n  public tvListTemp2 = []\n  // 每行电视的数量\n  public col_size = 4\n  // 电视选中二级类型列表\n  public selectTypeList = null\n  // 当前页码\n  public pageIndex = 1\n  // 每页大小\n  public pageSize = 20\n  // 关键词\n  public keyWord = 'null'\n\n  constructor(\n    public storage: StorageService,\n    public tools: ToolsService,\n    public activeRoute: ActivatedRoute,\n    public router: Router\n  ) {\n    this.activeRoute.queryParams.subscribe((params: Params) => {\n      // 获取当前电视类型\n      this.type = params['type']\n      // 获取电视列表\n      this.getTvs()\n      // 获取电视类型\n      this.getTvType()\n    })\n  }\n\n  ngOnInit() {\n  }\n\n  /**\n   * 获取电视类型\n   */\n\n  getTvType() {\n    var typeList = this.storage.get('tv-' + this.type + '-type')\n    if (typeList == null || typeList.length == 0) {\n      // 本地缓存数据不存在\n      if (this.specialTypeList.includes(this.type)) {\n        if (this.type == '地方台') {\n          this.typeList = this.localStationNameList\n        } else if (this.type = '港澳台') {\n          this.typeList = this.hongkongMacaoTaiwanNameList\n        } else if (this.type = '海外台') {\n          this.typeList = this.overseasStationNameList\n        }\n        this.storage.set('tv-' + this.type + '-type', this.typeList)\n      }\n    } else {\n      if (this.specialTypeList.includes(this.type)) {\n        // 本地缓存数据存在\n        this.typeList = typeList\n      }\n    }\n  }\n\n  /**\n   * 获取所有电视信息\n   */\n\n  getTvs() {\n    var movieList = this.storage.get('more-tv-' + this.type + '-' + this.selectedType)\n    if (movieList == null || movieList.length == 0 || this.pageIndex > (movieList.length / this.pageSize)) {\n      this.tools.getTvListApi(this.type, this.selectedType, this.pageIndex, this.pageSize, this.keyWord).then((data: any) => {\n        if (data.code == 0) {\n          this.tvList = this.tvList.concat(data.data)\n          this.storage.set('more-tv-' + this.type + '-' + this.selectedType, this.tvList)\n        }\n      })\n    } else {\n      // 本地有缓存数据\n      this.tvList = movieList\n    }\n  }\n\n  /**\n   * 跳转到电视详情页\n   * @param _id 电视_id\n   */\n\n  goTvDetail(_id) {\n    var result = this.tools.checkUser()\n    if (result) {\n      this.router.navigate(['/tv-detail'], {\n        queryParams: {\n          _id: _id\n        }\n      })\n    }\n  }\n\n  /**\n   * 下拉刷新\n   * @param event 事件对象\n   */\n\n  doRefresh(event) {\n    // 清空缓存\n    this.clearCache()\n    // 清空电视列表数据\n    this.tvList = []\n    // 修改当前页码为1\n    this.pageIndex = 1\n    // 获取电视列表\n    this.getTvs()\n    if (event) {\n      //告诉ionic 刷新数据完成\n      event.target.complete();\n    }\n  }\n\n  /**\n   * 上拉加载更多\n   * @param event 事件对象\n   */\n\n  doLoadMore(event) {\n    // 将当前页码加1\n    this.pageIndex = this.pageIndex + 1\n    // 获取电视列表\n    this.getTvs()\n    if (event) {\n      //告诉ionic 刷新数据完成\n      event.target.complete();\n    }\n  }\n\n  /**\n   * 改变电视类型\n   * @param type  当前选中电视二级分类\n   */\n\n  changeMovieType(type) {\n    // 清空电视列表数据\n    this.tvList = []\n    // 修改当前页码为1\n    this.pageIndex = 1\n    // 向电视列表中添加当前选中项\n    this.selectedType = type;\n    // 获取电视列表\n    this.getTvs()\n  }\n\n  /**\n   * 清空缓存\n   */\n\n  clearCache() {\n    this.storage.set('more-tv-' + this.type + '-' + this.selectedType, [])\n  }\n\n}\n"],"sourceRoot":""}