{"version":3,"sources":["webpack:///./src/app/browse-record/browse-record.module.ts","webpack:///./src/app/browse-record/browse-record.page.html","webpack:///./src/app/browse-record/browse-record.page.scss","webpack:///./src/app/browse-record/browse-record.page.ts"],"names":[],"mappings":"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","file":"browse-record-browse-record-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BrowseRecordPage } from './browse-record.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BrowseRecordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [BrowseRecordPage]\n})\nexport class BrowseRecordPageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"danger\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n          </ion-buttons>\\n      <ion-title style=\\\"text-align: center;\\\">{{user_name}}的浏览记录</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content>\\n\\n  <!-- 下拉刷新 -->\\n<ion-refresher (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"松开刷新\\\" refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"正在刷新\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n  <!-- 下拉刷新 -->\\n\\n  <!-- 历史记录 -->\\n<ion-list class=\\\"ios list-ios hydrated\\\">\\n    <ion-item class=\\\"item-label item ios in-list ion-focusable hydrated\\\" *ngFor=\\\"let record of recordList\\\" (click)=\\\"goRecordDetail(record)\\\">\\n      <ion-thumbnail slot=\\\"start\\\" class=\\\"ios hydrated\\\">\\n        <img src=\\\"{{record.src}}\\\" onerror=\\\"onerror=null;src='https://gxtstatic.com/xl/statics/img/nopic.gif'\\\">\\n      </ion-thumbnail>\\n      <ion-label class=\\\"sc-ion-label-ios-h sc-ion-label-ios-s ios hydrated\\\">\\n        <h2>{{record.name}}</h2>\\n        <h3>{{record.type}}&nbsp;&nbsp;{{record.type2}}</h3>\\n        <p>{{record.record_time}}</p>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n  <!-- 历史记录 -->\\n\\n  <!-- 上拉加载更多 -->\\n <ion-infinite-scroll (ionInfinite)=\\\"doLoadMore($event)\\\">\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"正在加载\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <!-- 上拉加载更多 -->\\n\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Jyb3dzZS1yZWNvcmQvYnJvd3NlLXJlY29yZC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { StorageService } from '../storage.service';\nimport { ToolsService } from '../tools.service';\n\n@Component({\n  selector: 'app-browse-record',\n  templateUrl: './browse-record.page.html',\n  styleUrls: ['./browse-record.page.scss'],\n})\nexport class BrowseRecordPage implements OnInit {\n\n  // 用户名称\n  public user_name = ''\n\n  // 历史记录列表\n  public recordList = []\n\n  // 当前页码\n  public pageIndex = 1\n  // 每页大小\n  public pageSize = 24\n\n  constructor(\n    public storage: StorageService,\n    public tools: ToolsService,\n    public router: Router\n  ) { \n    // 获取用户名称\n    this.user_name = this.storage.get('user_name')\n    // 获取浏览记录\n    this.getBrowseRecords()\n  }\n\n  ngOnInit() {\n  }\n\n  /**\n   * 获取浏览记录\n   */\n\n  getBrowseRecords() {\n    this.tools.getRecordsApi(this.pageIndex, this.pageSize).then((data: any) => {\n      this.recordList = this.recordList.concat(data.data)\n    })\n  }\n\n  /**\n   * 跳转到历史记录详情页\n   * @param _id 小品_id\n   */\n\n  goRecordDetail(record) {\n    var browse_type = record.browse_type\n    var id = record.id\n    var url = record.url\n    var result = this.tools.checkUser()\n    if (result) {\n    this.router.navigate(['/'+browse_type+'-detail'], {\n      queryParams: {\n        _id: id,\n        url: url\n      }\n    })\n  }\n  }\n\n  /**\n   * 下拉刷新\n   * @param event 事件对象\n   */\n\n  doRefresh(event) {\n    // 清空历史记录数据\n    this.recordList = []\n    // 修改当前页码\n    this.pageIndex = 1\n    // 获取历史记录列表\n    this.getBrowseRecords()\n    if (event) {\n      //告诉ionic 刷新数据完成\n      event.target.complete();\n    }\n  }\n\n  /**\n   * 上拉加载更多\n   * @param event 事件对象\n   */\n\n  doLoadMore(event) {\n    // 将当前页码加1\n    this.pageIndex = this.pageIndex + 1\n    // 获取历史记录列表\n    this.getBrowseRecords()\n    if (event) {\n      //告诉ionic 刷新数据完成\n      event.target.complete();\n    }\n  }\n\n}\n"],"sourceRoot":""}