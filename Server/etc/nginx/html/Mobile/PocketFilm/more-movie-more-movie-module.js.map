{"version":3,"sources":["webpack:///./src/app/more-movie/more-movie.module.ts","webpack:///./src/app/more-movie/more-movie.page.html","webpack:///./src/app/more-movie/more-movie.page.scss","webpack:///./src/app/more-movie/more-movie.page.ts"],"names":[],"mappings":"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","file":"more-movie-more-movie-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MoreMoviePage } from './more-movie.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MoreMoviePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MoreMoviePage]\n})\nexport class MoreMoviePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"danger\\\">\\n    <ion-back-button defaultHref=\\\"/\\\" slot=\\\"start\\\"></ion-back-button>\\n    <ion-title>{{typeName}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <!-- 下拉刷新 -->\\n  <ion-refresher (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"松开刷新\\\" refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"正在刷新\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n  <!-- 下拉刷新 -->\\n\\n  <!-- 电影列表 -->\\n  <section class=\\\"main\\\">\\n    <div id=\\\"page\\\">\\n    </div>\\n\\n    <!-- 分类 -->\\n    <div class=\\\"type_list_more\\\">\\n        <ion-segment scrollable *ngFor=\\\"let type of typeList;let i = index\\\">\\n            <ion-segment-button *ngFor=\\\"let typeName of type\\\" value=\\\"{{type}}\\\" (click)=\\\"changeMovieType(i, typeName)\\\">\\n              <a class=\\\"more_movie_type_name more_movie_type_name_selected\\\" (click)=\\\"changeMovieType(i, typeName)\\\"\\n                *ngIf=\\\"selectedTypeNameList[i] == typeName\\\">{{typeName}}</a>\\n              <a class=\\\"more_movie_type_name\\\" (click)=\\\"changeMovieType(i, typeName)\\\"\\n                *ngIf=\\\"selectedTypeNameList[i] != typeName\\\">{{typeName}}</a>\\n            </ion-segment-button>\\n          </ion-segment>\\n    </div>\\n\\n    <ion-segment [(ngModel)]=\\\"sortType\\\">\\n      <ion-segment-button value=\\\"1\\\" (click)=\\\"changeSortType(1)\\\">\\n        最新\\n      </ion-segment-button>\\n      <ion-segment-button value=\\\"2\\\" (click)=\\\"changeSortType(2)\\\">\\n        最热\\n      </ion-segment-button>\\n    </ion-segment>\\n\\n    <!-- 最热影视 -->\\n    <div class=\\\"mod_a globalPadding\\\">\\n      <div class=\\\"tb_a\\\">\\n        <ul class=\\\"picTxt picTxtA clearfix\\\" id=\\\"data_list\\\">\\n          <li *ngFor=\\\"let latestTop10Movie of movieList\\\" (click)=\\\"goMovieDetail((latestTop10Movie._id))\\\">\\n            <div class=\\\"con\\\">\\n              <a title=\\\"{{latestTop10Movie.name}}\\\"><img\\n                  data-src=\\\"{{latestTop10Movie.src}}\\\" alt=\\\"{{latestTop10Movie.name}}\\\" src=\\\"{{latestTop10Movie.src}}\\\"\\n                  onerror=\\\"onerror=null;src='https://m.88ys.cc/images/load.gif'\\\"\\n                  style=\\\"width: 158px; height: 159px; display: block;\\\"><span class=\\\"sNum\\\"><em\\n                    class=\\\"emScore\\\">{{latestTop10Movie.update_status}}</em></span> <span\\n                  class=\\\"sTit\\\">{{latestTop10Movie.name}}</span> </a>\\n            </div>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </section>\\n\\n  <!-- 上拉加载更多 -->\\n  <ion-infinite-scroll (ionInfinite)=\\\"doLoadMore($event)\\\">\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"正在加载\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <!-- 上拉加载更多 -->\\n\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vcmUtbW92aWUvbW9yZS1tb3ZpZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params, Router } from '@angular/router';\n\nimport { StorageService } from '../storage.service';\nimport { ToolsService } from '../tools.service';\n\n@Component({\n  selector: 'app-more-movie',\n  templateUrl: './more-movie.page.html',\n  styleUrls: ['./more-movie.page.scss'],\n})\nexport class MoreMoviePage implements OnInit {\n\n  // 影视类型\n  public type;\n  // 影视类型列表\n  public typeList = [];\n  public typeListTemp;\n  // 影视类型名称\n  public typeName;\n  // 选中类型名称\n  public selectedTypeNameList = []\n  // 0：电影 1：电视剧 2：综艺 3：动漫\n  // 影视类型名称列表\n  public typeNameList = ['电影', '电视剧', '综艺', '动漫', '少儿'];\n  // 电影列表\n  public movieList = []\n  public movieListTemp = []\n  public movieListTemp2 = []\n  // 每行电影的数量\n  public col_size = 4\n  // 当前页码\n  public pageIndex = 1\n  // 每页大小\n  public pageSize = 20\n  // 排序方式 0：发布日期 1:评分\n  public sortType = 1\n  // 关键词\n  public keyWord = 'null'\n  public source_index = 0;\n  public type_index = 0;\n  // 浏览类型\n  public browse_type = 'movie'\n\n  constructor(\n    public storage: StorageService,\n    public tools: ToolsService,\n    public activeRoute: ActivatedRoute,\n    public router: Router\n  ) {\n    this.activeRoute.queryParams.subscribe((params: Params) => {\n      this.type = params['type']\n      this.sortType = params['sortType']\n      this.typeName = this.typeNameList[this.type]\n      this.getMovieType()\n    })\n  }\n\n  ngOnInit() {\n  }\n\n  /**\n   * 获取影视类型\n   */\n\n  getMovieType() {\n    var typeList = this.storage.get('movie-' + this.type + '-type')\n    if (typeList == null || typeList.length == 0) {\n      // 本地缓存数据不存在\n      this.tools.getMovieTypeApi().then((data: any) => {\n        if (data.code == 0) {\n          this.typeListTemp = data.data\n          // 电影\n          if (this.type == 0) {\n            for (var i = 0; i < this.typeListTemp.length; i++) {\n              // 过滤掉影视剧情类型，如言情、剧情、都市...\n              if (i == 3) break\n              var typeNames = this.typeListTemp[i].names\n              var type = []\n              if (i == 0) {\n                // 设置选中类型名称\n                this.selectedTypeNameList[i] = typeNames[0];\n                // 分类\n                type.push('分类:');\n                for (var j = 0; j < typeNames.length; j++) {\n                  if (typeNames[j] == '全部' || typeNames[j].split('片').length == 2) {\n                    type.push(typeNames[j])\n                  }\n                }\n                this.typeList.push(type)\n              }\n            }\n          } else if (this.type == 1) {\n            //  电视剧\n            for (var i = 0; i < this.typeListTemp.length; i++) {\n              // 过滤掉影视剧情类型，如言情、剧情、都市...\n              if (i == 3) break\n              var typeNames = this.typeListTemp[i].names\n              var type = []\n              if (i == 0) {\n                // 设置选中类型名称\n                this.selectedTypeNameList[i] = typeNames[0];\n                // 分类\n                type.push('分类:');\n                for (var j = 0; j < typeNames.length; j++) {\n                  if (typeNames[j] == '全部' || (typeNames[j] != '电视剧' && typeNames[j].split('剧').length == 2 && typeNames[j].split('片').length != 2)) {\n                    type.push(typeNames[j])\n                  }\n                }\n                this.typeList.push(type)\n              }\n            }\n          }\n          // 地区、年代\n          for (var i = 1; i < this.typeListTemp.length; i++) {\n            // 过滤掉影视剧情类型，如言情、剧情、都市...\n            if (i == 3) break\n            var typeNames = this.typeListTemp[i].names\n            var type = []\n            if (i == 1) type.push('地区:');\n            if (i == 2) type.push('年代:');\n            // 设置选中类型名称\n            if (this.type == 0 || this.type == 1) {\n              this.selectedTypeNameList[i] = typeNames[0];\n            } else {\n              this.selectedTypeNameList[i - 1] = typeNames[0];\n            }\n            for (var j = 0; j < typeNames.length; j++) {\n              type.push(typeNames[j])\n            }\n            this.typeList.push(type)\n            // 缓存本地数据\n            this.storage.set('movie-' + this.type + '-type', this.typeList)\n          }\n          this.getMovies()\n        }\n      })\n    } else {\n      // 本地缓存数据存在\n      this.typeList = typeList\n      for (var i = 0; i < this.typeList.length; i++) {\n        this.selectedTypeNameList[i] = this.typeList[i][1]\n        this.getMovies()\n      }\n    }\n  }\n\n  /**\n   * 改变影视类型\n   * @param i 一级分类序号\n   * @param j 二级分类序号\n   */\n\n  changeMovieType(i, j) {\n    // 清空影视列表数据\n    this.movieList = []\n    // 修改当前页码为1\n    this.pageIndex = 1\n    // 向影视列表中添加当前选中项\n    this.selectedTypeNameList[i] = j;\n    // 获取影视列表\n    this.getMovies()\n  }\n\n  /**\n   * 获取选种类型\n   */\n\n  getSelectedTypeNames() {\n    var selectedTypeNames = ''\n    for (var i = 0; i < this.selectedTypeNameList.length; i++) {\n      selectedTypeNames += '-' + this.selectedTypeNameList[i]\n    }\n    return selectedTypeNames\n  }\n\n  /**\n   * 获取所有影视信息\n   */\n\n  getMovies() {\n    var selectedTypeNames = this.getSelectedTypeNames()\n    var movieList = this.storage.get('more-movie-' + this.type + selectedTypeNames + '-' + this.sortType)\n    if (movieList == null || movieList.length == 0 || this.pageIndex > (movieList.length / this.pageSize)) {\n      // 本地没有缓存数据\n      this.tools.getMovieListApi(this.type, this.selectedTypeNameList, this.pageIndex, this.pageSize, this.sortType, this.keyWord).then((data: any) => {\n        // 截取电影名称的长度\n        if (data.code == 0) {\n          this.movieList = this.movieList.concat(data.data)\n          this.storage.set('more-movie-' + this.type + selectedTypeNames + '-' + this.sortType, this.movieList)\n        }\n      })\n    } else {\n      // 本地有缓存数据\n      this.movieList = movieList\n    }\n  }\n\n  /**\n   * 跳转到影视详情页\n   * @param movie 影视信息\n   */\n\n  goMovieDetail(_id) {\n    //  跳转到影视详情页\n    this.router.navigate(['/movie-detail'], {\n      queryParams: {\n        _id: _id\n      }\n    })\n  }\n\n  /**\n   * 下拉刷新\n   * @param event 事件对象\n   */\n\n  doRefresh(event) {\n    // 清空缓存\n    this.clearCache()\n    // 清空影视列表数据\n    this.movieList = []\n    // 修改当前页码为1\n    this.pageIndex = 1\n    // 获取影视列表\n    this.getMovies()\n    if (event) {\n      //告诉ionic 刷新数据完成\n      event.target.complete();\n    }\n  }\n\n  /**\n   * 上拉加载更多\n   * @param event 事件对象\n   */\n\n  doLoadMore(event) {\n    // 将当前页码加1\n    this.pageIndex = this.pageIndex + 1\n    var selectedTypeNames = this.getSelectedTypeNames()\n    // 获取影视列表\n    this.getMovies()\n    if (event) {\n      //告诉ionic 刷新数据完成\n      event.target.complete();\n    }\n  }\n\n  /**\n   * 修改影视排序方式\n   * @param sortType 排序方式 \n   */\n\n  changeSortType(sortType) {\n    // 修改当前页码为1\n    this.pageIndex = 1\n    // 清空影视列表数据\n    this.movieList = []\n    // 修改排序方式\n    this.sortType = sortType\n    // 获取影视列表\n    this.getMovies()\n  }\n\n  /**\n   * 清空缓存\n   */\n\n  clearCache() {\n    var selectedTypeNames = this.getSelectedTypeNames()\n    this.storage.set('more-movie-' + this.type + selectedTypeNames + '-' + this.sortType, [])\n  }\n\n}\n"],"sourceRoot":""}